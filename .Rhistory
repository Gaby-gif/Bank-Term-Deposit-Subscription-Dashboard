mode = "lines+markers",
marker = list(color = yes_color, size = 8)) %>%
layout(
margin = list(r = 40),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Manufacturing has experienced a partial normalisation since the historic lows recorded in April',
'</sup>'), x = 0.1, xanchor = 'left', subtitle = "Subtitle"),
yaxis = list(title = "AVG Balance"),
yaxis2 = list(
title = "No / Yes (%)",
overlaying = "y",
side = "right",
tickformat = ".1f%%",
range = c(0,100)
),
barmode = "group"
)
fig
fig <- plot_ly(df, x = ~education, y = ~V3, type = "bar", name = "",
hovertemplate = paste('Education : %{x}', '<br>Average Balance: %{y}€'),
marker = list(color = education_colors_map[df$education]),
showlegend = FALSE) %>%
add_lines(y = ~no, name = "", yaxis = "y2",
line = list(color = no_color, width = 2),
hovertemplate = paste('Failed rate : %{y}%'),
mode = "lines+markers",
marker = list(color = no_color, size = 8)) %>%
add_lines(y = ~yes, name = "", yaxis = "y2",
hovertemplate = paste('Success Rate : %{y}%'),
line = list(color = yes_color, width = 2),
mode = "lines+markers",
marker = list(color = yes_color, size = 8)) %>%
layout(
margin = list(r = 40),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Manufacturing has experienced a partial normalisation since the historic lows recorded in April',
'</sup>'), x = 0.05, xanchor = 'left', subtitle = "Subtitle"),
yaxis = list(title = "AVG Balance"),
yaxis2 = list(
title = "No / Yes (%)",
overlaying = "y",
side = "right",
tickformat = ".1f%%",
range = c(0,100)
),
barmode = "group"
)
fig
fig <- plot_ly(df, x = ~education, y = ~V3, type = "bar", name = "",
hovertemplate = paste('Education : %{x}', '<br>Average Balance: %{y}€'),
marker = list(color = education_colors_map[df$education]),
showlegend = FALSE) %>%
add_lines(y = ~no, name = "", yaxis = "y2",
line = list(color = no_color, width = 2),
hovertemplate = paste('Failed rate : %{y}%'),
mode = "lines+markers",
marker = list(color = no_color, size = 8)) %>%
add_lines(y = ~yes, name = "", yaxis = "y2",
hovertemplate = paste('Success Rate : %{y}%'),
line = list(color = yes_color, width = 2),
mode = "lines+markers",
marker = list(color = yes_color, size = 8)) %>%
layout(
margin = list(r = 40),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates and average balance by education level',
'</sup>'), x = 0.05, y = 1, xanchor = 'left'),
yaxis = list(title = "AVG Balance"),
yaxis2 = list(
title = "No / Yes (%)",
overlaying = "y",
side = "right",
tickformat = ".1f%%",
range = c(0,100)
),
barmode = "group"
)
fig
fig <- plot_ly(df, x = ~education, y = ~V3, type = "bar", name = "",
hovertemplate = paste('Education : %{x}', '<br>Average Balance: %{y}€'),
marker = list(color = education_colors_map[df$education]),
showlegend = FALSE) %>%
add_lines(y = ~no, name = "", yaxis = "y2",
line = list(color = no_color, width = 2),
hovertemplate = paste('Failed rate : %{y}%'),
mode = "lines+markers",
marker = list(color = no_color, size = 8)) %>%
add_lines(y = ~yes, name = "", yaxis = "y2",
hovertemplate = paste('Success Rate : %{y}%'),
line = list(color = yes_color, width = 2),
mode = "lines+markers",
marker = list(color = yes_color, size = 8)) %>%
layout(
margin = list(r = 40),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates and average balance by education level',
'</sup>'), x = 0.05, y = 0.3, xanchor = 'left'),
yaxis = list(title = "AVG Balance"),
yaxis2 = list(
title = "No / Yes (%)",
overlaying = "y",
side = "right",
tickformat = ".1f%%",
range = c(0,100)
),
barmode = "group"
)
fig
fig <- plot_ly(df, x = ~education, y = ~V3, type = "bar", name = "",
hovertemplate = paste('Education : %{x}', '<br>Average Balance: %{y}€'),
marker = list(color = education_colors_map[df$education]),
showlegend = FALSE) %>%
add_lines(y = ~no, name = "", yaxis = "y2",
line = list(color = no_color, width = 2),
hovertemplate = paste('Failed rate : %{y}%'),
mode = "lines+markers",
marker = list(color = no_color, size = 8)) %>%
add_lines(y = ~yes, name = "", yaxis = "y2",
hovertemplate = paste('Success Rate : %{y}%'),
line = list(color = yes_color, width = 2),
mode = "lines+markers",
marker = list(color = yes_color, size = 8)) %>%
layout(
margin = list(r = 40),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates and average balance by education level',
'</sup>'), x = 0.05, xanchor = 'left'),
yaxis = list(title = "AVG Balance"),
yaxis2 = list(
title = "No / Yes (%)",
overlaying = "y",
side = "right",
tickformat = ".1f%%",
range = c(0,100)
),
barmode = "group"
)
fig
runApp()
#data %>% count(education, sort = TRUE)
data %>% count(job, sort = TRUE)
list(data$job)
#data %>% count(education, sort = TRUE)
data %>% count(job, sort = TRUE)
data$job2 = data$job
data$job2[data$job2 == "blue-collar"] <- "manual-workers"
data$job2[data$job2 == "services"] <- "manual-workers"
data$job2[data$job2 == "housemaid"] <- "manual-workers"
data$job2[data$job2 == "management"] <- "managers"
data$job2[data$job2 == "admin."] <- "managers"
data$job2[data$job2 == "technician"] <- "managers"
data$job2[data$job2 == "self-employed"] <- "self-employed"
data$job2[data$job2 == "entrepreneur"] <- "self-employed"
data$job2[data$job2 == "unemployed"] <- "inactive"
data$job2[data$job2 == "retired"] <- "inactive"
data$job2[data$job2 == "student"] <- "inactive"
data %>% count(job2, sort = FALSE)
fig <- plot_ly(data %>% count(job2, sort = FALSE),
labels = ~job2,
values = ~n,
type = 'pie',
textposition = 'inside',
textinfo = 'label+percent',
insidetextfont = list(color = '#FFFFFF'),
hoverinfo = 'text',
text = ~paste(n,job2),
marker = list(colors = job_colors_map,
line = list(color = '#FFFFFF', width = 1)),
showlegend = FALSE)
job_colors_map <- c(
"manual-workers" = "#1f77b4",
"managers" = "#ff7f0e",
"self-employed" = "#2ca02c",
"inactive" = "#9467bd",
"unknown" = "#c7c7c7"
)
data %>% count(job2, sort = FALSE)
fig <- plot_ly(data %>% count(job2, sort = FALSE),
labels = ~job2,
values = ~n,
type = 'pie',
textposition = 'inside',
textinfo = 'label+percent',
insidetextfont = list(color = '#FFFFFF'),
hoverinfo = 'text',
text = ~paste(n,job2),
marker = list(colors = job_colors_map,
line = list(color = '#FFFFFF', width = 1)),
showlegend = FALSE)
fig <- fig %>% layout(title = 'Distribution of education',
xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
fig
runApp()
runApp()
---
title: "Vignette Title"
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
plot(1:10)
plot(10:1)
knitr::kable(head(mtcars, 10))
runApp()
runApp()
min(data$age)
max(data$age)
## Chart : Success per age
data %>%
mutate(
# Create categories
age_group = dplyr::case_when(
age <= 25            ~ "18-25",
age > 25 & age <= 35 ~ "26-35",
age > 35 & age <= 45 ~ "36-45",
age > 45 & age <= 55 ~ "46-55",
age > 55 & age <= 65 ~ "56-65",
age > 65             ~ "65+"
),
# Convert to factor
age_group = factor(
age_group,
level = c("18-25", "26-35","45-64", "46-55", "56-65", "65+")
)
)
## Chart : Success per age
data = data %>%
mutate(
# Create categories
age_group = dplyr::case_when(
age <= 25            ~ "18-25",
age > 25 & age <= 35 ~ "26-35",
age > 35 & age <= 45 ~ "36-45",
age > 45 & age <= 55 ~ "46-55",
age > 55 & age <= 65 ~ "56-65",
age > 65             ~ "65+"
),
# Convert to factor
age_group = factor(
age_group,
level = c("18-25", "26-35","45-64", "46-55", "56-65", "65+")
)
)
data$age_group
data[2]
data[,2]
data[2,]
## Chart : Success per age
data = data %>%
mutate(
# Create categories
age_group = dplyr::case_when(
age <= 25            ~ "18-25",
age > 25 & age <= 35 ~ "26-35",
age > 35 & age <= 45 ~ "36-45",
age > 45 & age <= 55 ~ "46-55",
age > 55 & age <= 65 ~ "56-65",
age > 65             ~ "65+"
),
# Convert to factor
age_group = factor(
age_group,
level = c("18-25", "26-35", "36-45", "46-55", "56-65", "65+")
)
)
data = read.csv("bank-full.csv", header = TRUE, sep = ';')
data$job2 = data$job
data$job2[data$job2 == "blue-collar"] <- "manual-workers"
data$job2[data$job2 == "services"] <- "manual-workers"
data$job2[data$job2 == "housemaid"] <- "manual-workers"
data$job2[data$job2 == "management"] <- "managers"
data$job2[data$job2 == "admin."] <- "managers"
data$job2[data$job2 == "technician"] <- "managers"
data$job2[data$job2 == "self-employed"] <- "self-employed"
data$job2[data$job2 == "entrepreneur"] <- "self-employed"
data$job2[data$job2 == "unemployed"] <- "inactive"
data$job2[data$job2 == "retired"] <- "inactive"
data$job2[data$job2 == "student"] <- "inactive"
## Chart : Success per age
data = data %>%
mutate(
# Create categories
age_group = dplyr::case_when(
age <= 25            ~ "18-25",
age > 25 & age <= 35 ~ "26-35",
age > 35 & age <= 45 ~ "36-45",
age > 45 & age <= 55 ~ "46-55",
age > 55 & age <= 65 ~ "56-65",
age > 65             ~ "65+"
),
# Convert to factor
age_group = factor(
age_group,
level = c("18-25", "26-35", "36-45", "46-55", "56-65", "65+")
)
)
data[2,]
Ntab = table(data$age_group, data$y)
Ntab
Ptab = round(prop.table(Ntab) * 100,2)
Ptab
df = as.data.frame(age_group_success)
df = as.data.frame(Ptab)
df = rownames_to_column(df, var = "age_group")
df
Ntab = table(data$age_group, data$y)
Ptab = round(prop.table(Ntab) * 100,2)
df = as.data.frame(Ptab)
df
Ptab
df = as.data.frame(Ptab)
df
df_age_no = df[Var2 == 'no']
df_age_yes = df[Var2 == 'yes']
df_age_no = df[df$Var2 == 'no']
df_age_no = df[df$Var2 == 'no']
df_age_no = df[df$Var2 == 'no']; df_age_no
df$Var2
df
df_age_no = df[df$Var2 == 'no',]
df_age_no
df_age_yes = df[df$Var2 == 'yes',]
df_age_yes
Ntab = table(data$age_group, data$y)
df = as.data.frame(Ntab)
df_age_no = df[df$Var2 == 'no',]
df_age_no
df_age_yes = df[df$Var2 == 'yes',]
df_age_yes
Ntab = table(data$age_group, data$y)
df = as.data.frame(Ntab)
df
fig = px.bar(df, x="Var1", y="Freq", color="Var2", title="Long-Form Input")
fig.show()
fig <- plot_ly(df, x = ~Var1, y = ~Freq, type = 'bar', name = 'SF Zoo')
fig <- fig %>% add_trace(y = ~Var2, name = 'LA Zoo')
fig <- fig %>% layout(yaxis = list(title = 'Count'), barmode = 'stack')
fig
Ntab
Ntab = table(data$age_group, data$y)
Ntab
df = as.data.frame(Ntab)
df = rownames_to_column(df, var = "age_group")
df
Ntab = table(data$age_group, data$y)
Ntab
df = as.data.frame(Ntab)
df
df[df$Var2 == 'no',]
df$Var2[df$Var2 == 'no',]
df[df$Var2 == 'no',2]
df[df$Var2 == 'no',1]
df
fig <- plot_ly(df, x = ~Var1, y = ~df[df$Var2 == 'no',2], type = 'bar', name = 'Not Subscribed')
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',2], name = 'Subscribed')
fig <- fig %>% layout(yaxis = list(title = 'Count'), barmode = 'stack')
fig
df[df$Var2 == 'yes',2]
df[df$Var2 == 'no',1]
df[df$Var2 == 'no',3]
df[df$Var2 == 'yes',3]
fig <- plot_ly(df, x = ~Var1, y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed')
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed')
fig <- fig %>% layout(yaxis = list(title = 'Count'), barmode = 'stack')
fig
fig <- plot_ly(df, x = ~df[df$Var2 == 'no',1], y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed')
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed')
fig <- fig %>% layout(yaxis = list(title = 'Count'), barmode = 'stack')
fig
fig <- plot_ly(df, x = ~df[df$Var2 == 'no',1], y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed')
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed')
fig <- fig %>% layout(yaxis = list(title = 'Count'), barmode = 'stack',
xaxis = list(title = 'Age'),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates across different age demographics',
'</sup>'), x = 0.05, xanchor = 'left')
)
fig
fig <- plot_ly(df, x = ~df[df$Var2 == 'no',1], y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed',
marker = list(color = '#f54a00'))
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed',
marker = list(color = '#86ac6a'))
fig <- fig %>% layout(yaxis = list(title = ''), barmode = 'stack',
xaxis = list(title = 'Age'),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates across different age demographics',
'</sup>'), x = 0.05, xanchor = 'left')
)
fig
fig <- plot_ly(df, x = ~df[df$Var2 == 'no',1], y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed',
marker = list(color = '#FFA500'))
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed',
marker = list(color = '#86ac6a'))
fig <- fig %>% layout(yaxis = list(title = ''), barmode = 'stack',
xaxis = list(title = 'Age'),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates across different age demographics',
'</sup>'), x = 0.05, xanchor = 'left')
)
fig
runApp()
runApp()
data = data %>%
mutate(
# Create categories
age_group = dplyr::case_when(
age <= 25            ~ "18-25",
age > 25 & age <= 35 ~ "26-35",
age > 35 & age <= 45 ~ "36-45",
age > 45 & age <= 55 ~ "46-55",
age > 55 & age <= 65 ~ "56-65",
age > 65             ~ "65+"
),
# Convert to factor
age_group = factor(
age_group,
level = c("18-25", "26-35", "36-45", "46-55", "56-65", "65+")
)
)
Ntab = table(data$age_group, data$y)
df = as.data.frame(Ntab)
df = rownames_to_column(df, var = "age_group")
fig <- plot_ly(df, x = ~df[df$Var2 == 'no',1], y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed',
marker = list(color = '#FFA500'))
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed',
marker = list(color = '#86ac6a'))
fig <- fig %>% layout(yaxis = list(title = ''), barmode = 'stack',
xaxis = list(title = 'Age'),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates across different age demographics',
'</sup>'), x = 0.05, xanchor = 'left')
)
fig
data = read.csv("bank-full.csv", header = TRUE, sep = ';')
head(data)
str(data)
data$job2 = data$job
data$job2[data$job2 == "blue-collar"] <- "manual-workers"
data$job2[data$job2 == "services"] <- "manual-workers"
data$job2[data$job2 == "housemaid"] <- "manual-workers"
data$job2[data$job2 == "management"] <- "managers"
data$job2[data$job2 == "admin."] <- "managers"
data$job2[data$job2 == "technician"] <- "managers"
data$job2[data$job2 == "self-employed"] <- "self-employed"
data$job2[data$job2 == "entrepreneur"] <- "self-employed"
data$job2[data$job2 == "unemployed"] <- "inactive"
data$job2[data$job2 == "retired"] <- "inactive"
data$job2[data$job2 == "student"] <- "inactive"
## Chart : Success per age
data_age = data %>%
mutate(
# Create categories
age_group = dplyr::case_when(
age <= 25            ~ "18-25",
age > 25 & age <= 35 ~ "26-35",
age > 35 & age <= 45 ~ "36-45",
age > 45 & age <= 55 ~ "46-55",
age > 55 & age <= 65 ~ "56-65",
age > 65             ~ "65+"
),
# Convert to factor
age_group = factor(
age_group,
level = c("18-25", "26-35", "36-45", "46-55", "56-65", "65+")
)
)
Ntab = table(data_age$age_group, data$y)
df = as.data.frame(Ntab)
df = rownames_to_column(df, var = "age_group")
fig <- plot_ly(df, x = ~df[df$Var2 == 'no',1], y = ~df[df$Var2 == 'no',3], type = 'bar', name = 'Not Subscribed',
marker = list(color = '#FFA500'))
fig <- fig %>% add_trace(y = ~df[df$Var2 == 'yes',3], name = 'Subscribed',
marker = list(color = '#86ac6a'))
fig <- fig %>% layout(yaxis = list(title = ''), barmode = 'stack',
xaxis = list(title = 'Age'),
title = list(text=paste0('Education Level Impact',
'<br>',
'<sup>',
'Success rates across different age demographics',
'</sup>'), x = 0.05, xanchor = 'left')
)
fig
data_age
Ntab
Ntab
df = as.data.frame(Ntab)
df = rownames_to_column(df, var = "age_group")
df
df[df$Var2 == 'no',1]
runApp()
runApp()
runApp()
runApp()
